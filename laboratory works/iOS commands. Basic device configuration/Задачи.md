Лабораторная работа. Базовая настройка коммутатора
	              Задачи
Часть 1. Проверка конфигурации коммутатора по умолчанию
Часть 2. Создание сети и настройка основных параметров устройства
•	Настройте базовые параметры коммутатора.
•	Настройте IP-адрес для ПК.
Часть 3. Проверка сетевых подключений
•	Отобразите конфигурацию устройства.
•	Протестируйте сквозное соединение, отправив эхо-запрос.
•	Протестируйте возможности удаленного управления с помощью Telnet.
		
Лабораторная работа. Базовая настройка коммутатора 

	Топология
 
	Таблица адресации
Устройство	Интерфейс	IP-адрес / префикс
S1	VLAN 1	192.168.1.2 /24
S1	VLAN 99	
S1	VLAN 99	
PC-A	NIC	192.168.1.10 /24
PC-A	NIC	
PC-A	NIC	
	Задачи
Часть 1. Проверка конфигурации коммутатора по умолчанию
Часть 2. Создание сети и настройка основных параметров устройства
•	Настройте базовые параметры коммутатора.
•	Настройте IP-адрес для ПК.
Часть 3. Проверка сетевых подключений
•	Отобразите конфигурацию устройства.
•	Протестируйте сквозное соединение, отправив эхо-запрос.
•	Протестируйте возможности удаленного управления с помощью Telnet.
	





Часть 1. Создание сети и проверка настроек коммутатора по умолчанию
В первой части лабораторной работы вам предстоит настроить топологию сети и проверить настройку коммутатора по умолчанию.
Шаг 1. Создайте сеть согласно топологии.
a.	Подсоедините консольный кабель, как показано в топологии. На данном этапе не подключайте кабель Ethernet компьютера PC-A.
Примечание. При использовании Netlab отключите интерфейс F0/6 на коммутаторе S1. Это имеет такой же эффект, как отсоединение компьютера PC-A от коммутатора S1.
            Switch#configure terminal
            Enter configuration commands, one per line. End with CNTL/Z.
            Switch(config)#interface FastEthernet0/6
Switch(config-if)#shutdown
b.	Установите консольное подключение к коммутатору с компьютера PC-A с помощью Tera Term или другой программы эмуляции терминала.
Вопрос:
Почему нужно использовать консольное подключение для первоначальной настройки коммутатора? Почему нельзя подключиться к коммутатору через Telnet или SSH?
Потому что без него мы никак не сможем настроить другие подключения и поэтому нельзя подключиться к коммутатору через Telnet или SSH
Шаг 2. Проверьте настройки коммутатора по умолчанию.
a.	Предположим, что коммутатор не имеет файла конфигурации, сохраненного в энергонезависимой памяти (NVRAM). Консольное подключение к коммутатору с помощью Tera Term или другой программы эмуляции терминала предоставит доступ к командной строке пользовательского режима EXEC в виде Switch>. Введите команду enable, чтобы войти в привилегированный режим EXEC.
Откройте окно конфигурации
Обратите внимание, что измененная в конфигурации строка будет отражать привилегированный режим EXEC.
Убедитесь, что на коммутаторе находится пустой файл конфигурации по умолчанию, с помощью команды show running-config привилегированного режима EXEC. Если конфигурационный файл был предварительно сохранен, его нужно удалить. В зависимости от модели коммутатора и версии IOS ваша конфигурация может слегка отличаться. Тем не менее, настроенных паролей или IP-адресов в конфигурации быть не должно. Выполните очистку настроек и перезагрузите коммутатор, если ваш коммутатор имеет настройки, отличные от настроек по умолчанию.
b.	Изучите текущий файл running configuration.
Вопросы:
Сколько интерфейсов FastEthernet имеется на коммутаторе 2960?
 24
Сколько интерфейсов Gigabit Ethernet имеется на коммутаторе 2960?
 2
Каков диапазон значений, отображаемых в vty-линиях?
 0-4, 5-15
c.	Изучите файл загрузочной конфигурации (startup configuration), который содержится в энергонезависимом ОЗУ (NVRAM).
Вопрос:
Почему появляется это сообщение? 
startup-config is not present - потому что нет еще записей конфига (чаще всего это сообщение выпадает при заводских настройках)
d.	Изучите характеристики SVI для VLAN 1.
Вопросы:
Назначен ли IP-адрес сети VLAN 1? 
no ip address
Какой MAC-адрес имеет SVI? Возможны различные варианты ответов.
 0090.0ce5.de4d, default
Данный интерфейс включен? 
выключен
e.	Изучите IP-свойства интерфейса SVI сети VLAN 1.
Вопрос:
Какие выходные данные вы видите?
            Vlan1 is administratively down, line protocol is down
Internet protocol processing disabled
f.	Подсоедините кабель Ethernet компьютера PC-A к порту 6 на коммутаторе и изучите IP-свойства интерфейса SVI сети VLAN 1. Дождитесь согласования параметров скорости и дуплекса между коммутатором и ПК.
Примечание. При использовании Netlab включите интерфейс F0/6 на коммутаторе S1.
Вопрос:
Какие выходные данные вы видите?
%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/6, changed state to up
g.	Изучите сведения о версии ОС Cisco IOS на коммутаторе.
Вопросы:
Под управлением какой версии ОС Cisco IOS работает коммутатор? 
Version 15.0(2)SE4 
Как называется файл образа системы? 
C2960-LANBASEK9-M
Какой базовый MAC-адрес назначен коммутатору? 
0090.0ce5.de4d
h.	Изучите свойства по умолчанию интерфейса FastEthernet, который используется компьютером PC-A.
Switch# show interface f0/6 
Вопрос:
Интерфейс включен или выключен? 
            включен
Что нужно сделать, чтобы включить интерфейс? 
 		Switch#conf
Configuring from terminal, memory, or network [terminal]? 
Enter configuration commands, one per line. End with CNTL/Z.
Switch(config)#interface f0/6
Switch(config-if)#no shutdown
            Какой MAC-адрес у интерфейса?
 0060.7039.5706 
Какие настройки скорости и дуплекса заданы в интерфейсе? 
 	Full-duplex, 100Mb/s


i.	Изучите параметры сети VLAN по умолчанию на коммутаторе.
Какое имя присвоено сети VLAN 1 по умолчанию? 
default
Какие порты расположены в сети VLAN 1?
Fa0/1, Fa0/2, Fa0/3, Fa0/4 Fa0/5, Fa0/6, Fa0/7, Fa0/8 Fa0/9, Fa0/10, Fa0/11, Fa0/12 Fa0/13, Fa0/14, Fa0/15, Fa0/16 Fa0/17, Fa0/18, Fa0/19, Fa0/20 Fa0/21, Fa0/22, Fa0/23, Fa0/24  Gig0/1, Gig0/2
Активна ли сеть VLAN 1?
active
К какому типу сетей VLAN принадлежит VLAN по умолчанию?
enet

j.	Изучите флеш-память.
Выполните одну из следующих команд, чтобы изучить содержимое флеш-каталога.
Switch# show flash 
Switch# dir flash: 
В конце имени файла указано расширение, например .bin. Каталоги не имеют расширения файла.
Вопрос:
Какое имя присвоено образу Cisco IOS?
2960-lanbasek9-mz.150-2.SE4.bin
Часть 2. Настройка базовых параметров сетевых устройств
Во второй части необходимо будет настроить основные параметры коммутатора и компьютера.
Шаг 1. Настройте базовые параметры коммутатора.
a.	В режиме глобальной конфигурации скопируйте следующие базовые параметры конфигурации и вставьте их в файл на коммутаторе S1. 
no ip domain-lookup
hostname S1
service password-encryption
enable secret class
banner motd #
Unauthorized access is strictly prohibited. #
b.	Назначьте IP-адрес интерфейсу SVI на коммутаторе. Благодаря этому вы получите возможность удаленного управления коммутатором.
Прежде чем вы сможете управлять коммутатором S1 удаленно с компьютера PC-A, коммутатору нужно назначить IP-адрес. Согласно конфигурации по умолчанию коммутатором можно управлять через VLAN 1. Однако в базовой конфигурации коммутатора не рекомендуется назначать VLAN 1 в качестве административной VLAN.
c.	Доступ через порт консоли также следует ограничить  с помощью пароля. Используйте cisco в качестве пароля для входа в консоль в этом задании. Конфигурация по умолчанию разрешает все консольные подключения без пароля. Чтобы консольные сообщения не прерывали выполнение команд, используйте параметр logging synchronous.
S1(config)# line con 0
S1(config-line)# logging synchronous 
d.	Настройте каналы виртуального соединения для удаленного управления (vty), чтобы коммутатор разрешил доступ через Telnet. Если не настроить пароль VTY, будет невозможно подключиться к коммутатору по протоколу Telnet.
Вопрос:
Для чего нужна команда login?
Включает доступ к VTY
Введите ваш ответ здесь.
йте окно настройки.
Шаг 2. Настройте IP-адрес на компьютере PC-A.
Назначьте компьютеру IP-адрес и маску подсети в соответствии с таблицей адресации.
1)	Перейдите в Панель управления. (Control Panel)
2)	В представлении «Категория» выберите « Просмотр состояния сети и задач».
3)	Щелкните Изменение параметров адаптера на левой панели.
4)	Щелкните правой кнопкой мыши интерфейс Ethernet и выберите «Свойства» .
5)	Выберите Протокол Интернета версии 4 (TCP/IPv4) > Свойства.
6)	Выберите Использовать следующий IP-адрес и введите IP-адрес и маску подсети  и нажмите ОК.
Часть 3. Проверка сетевых подключений
В третьей части лабораторной работы вам предстоит проверить и задокументировать конфигурацию коммутатора, протестировать сквозное соединение между компьютером PC-A и коммутатором S1, а также протестировать возможность удаленного управления коммутатором.
Шаг 1. Отобразите конфигурацию коммутатора.
Используйте консольное подключение на компьютере PC-A для отображения и проверки конфигурации коммутатора. Команда show run позволяет постранично отобразить всю текущую конфигурацию. Для пролистывания используйте клавишу пробела.
a.	Пример конфигурации приведен ниже. Параметры, которые вы настроили, выделены желтым. Другие параметры конфигурации — значения IOS по умолчанию.
Откройте окно конфигурации
S1# show run
Building configuration...

Current configuration : 2206 bytes
!
version 15.2
no service pad
service timestamps debug datetime msec
service timestamps log datetime msec
service password-encryption
!
hostname S1
!
boot-start-marker
boot-end-marker
!
enable secret 5 $1$mtvC$6NC.1VKr3p6bj7YGE.jNg0
!
no aaa new-model
system mtu routing 1500 
!
!
no ip domain-lookup
!
<output omitted>
!
interface FastEthernet0/24
 switchport access vlan 99
!
interface GigabitEthernet0/1
 switchport access vlan 99
!
interface GigabitEthernet0/2
 switchport access vlan 99
!
interface Vlan1
 ip address 192.168.1.2 255.255.255.0
!
ip default-gateway 192.168.1.1
ip http server
ip http secure-server
!
banner motd ^C
Unauthorized access is strictly prohibited. ^C
!
line con 0
 password 7 00071A150754
 logging synchronous
 login
line vty 0 4
 password 7 121A0C041104
 login
line vty 5 15
 password 7 121A0C041104
 login
!
end
b.	Проверьте параметры VLAN 1.
S1# show interface vlan 1 
Какова полоса пропускания этого интерфейса?
В каком состоянии находится VLAN 1?
	Vlan1 is up, line protocol is up
В каком состоянии находится канальный протокол?
	
Закройте окно настройки.
Шаг 2. Протестируйте сквозное соединение, отправив эхо-запрос.
a.	В командной строке компьютера PC-A с помощью утилиты ping проверьте связь сначала с адресом PC-A.
C:\> ping 192.168.1.10 
b.	Из командной строки компьютера PC-A отправьте эхо-запрос на административный адрес интерфейса SVI коммутатора S1.
C:\> ping 192.168.1.2
Поскольку компьютеру PC-A нужно преобразовать МАС-адрес коммутатора S1 с помощью ARP, время ожидания передачи первого пакета может истечь. Если эхо-запрос не удается, найдите и устраните неполадки базовых настроек устройства. Проверьте как физические кабели, так и логическую адресацию.
Шаг 3. Проверьте удаленное управление коммутатором S1.
После этого используйте удаленный доступ к устройству с помощью Telnet. В этой лабораторной работе устройства PC-A и S1 расположены рядом. В производственной сети коммутатор может находиться в коммутационном шкафу на последнем этаже, в то время как административный компьютер находится на первом этаже. На данном этапе вам предстоит использовать Telnet для удаленного доступа к коммутатору S1 через его административный адрес SVI. Telnet — это не безопасный протокол, но вы можете использовать его для проверки удаленного доступа. В случае с Telnet вся информация, включая пароли и команды, отправляется через сеанс в незашифрованном виде. В последующих лабораторных работах вы будете использовать протокол SSH для удаленного доступа к сетевым устройствам.
a.	Откройте Tera Term или другую программу эмуляции терминала с возможностью Telnet. 
b.	Выберите сервер Telnet и укажите адрес управления SVI для подключения к S1.  Пароль: cisco.
c.	После ввода пароля cisco вы окажетесь в командной строке пользовательского режима. Для перехода в исполнительский режим EXEC введите команду enable и используйте секретный пароль class.
d.	Сохраните конфигурацию.
e.	Чтобы завершить сеанс Telnet, введите exit.
Вопросы:
Закройте окно настройки.
	Вопросы для повторения
1.	Зачем необходимо настраивать пароль VTY для коммутатора? 
Для того чтобы дать доступ для подключения по TELNET
2.	Что нужно сделать, чтобы пароли не отправлялись в незашифрованном виде?
	service password-encryption



	Приложение А. Инициализация и перезагрузка коммутатора
a.	Подключитесь к коммутатору с помощью консоли и войдите в привилегированный режим EXEC.
Откройте окно конфигурации
Switch> enable
Switch#
b.	Воспользуйтесь командой show flash, чтобы определить, были ли созданы сети VLAN на коммутаторе.
Switch# show flash
Каталог flash:/

    2 -rwx 1919 Mar 1 1993 00:06:33 +00:00 private-config.text
    3 -rwx 1632 Mar 1 1993 00:06:33 +00:00 config.text
    4 -rwx 13336 Mar 1 1993 00:06:33 +00:00 multiple-fs
    5 -rwx 11607161 Mar 1 1993 02:37:06 +00:00 c2960-lanbasek9-mz.150-2.SE.bin
    6 -rwx 616 Mar 1 1993 00:07:13 +00:00 vlan.dat

всего 32514048 байтов (свободно 20886528 байта)
c.	Если во флеш-памяти обнаружен файл vlan.dat, удалите его.
Switch# delete vlan.dat
Delete filename [vlan.dat]?
d.	Появится запрос о проверке имени файла. Если вы ввели имя правильно, нажмите клавишу Enter. В противном случае вы можете изменить имя файла.
Будет предложено подтвердить удаление этого файла. Нажмите клавишу Enter для подтверждения.
Delete flash:/vlan.dat? [confirm]
Switch#
e.	Введите команду erase startup-config, чтобы удалить файл загрузочной конфигурации из NVRAM. Появится запрос об удалении конфигурационного файла. Нажмите клавишу Enter для подтверждения.
Switch# erase startup-config
Erasing the nvram filesystem will remove all configuration files! Продолжить? [confirm]
[OK]
Erase of nvram: complete
Switch#
f.	Перезагрузите коммутатор, чтобы удалить устаревшую информацию о конфигурации из памяти. Затем появится запрос на подтверждение перезагрузки коммутатора. Нажмите клавишу Enter, чтобы продолжить.
Switch# reload
Proceed with reload? (Команда reload запускается на активном модуле, будет перезагружен весь стек. Продолжить ее выполнение?) [confirm]
Примечание. До перезагрузки коммутатора может появиться запрос о сохранении текущей конфигурации. Чтобы ответить, введите no и нажмите клавишу Enter.
System configuration has been modified. Save? [yes/no]: no
g.	После перезагрузки коммутатора появится запрос о входе в диалоговое окно начальной конфигурации. Чтобы ответить, введите no и нажмите клавишу Enter.
Would you like to enter the initial configuration dialog? [yes/no]: no
Switch>
